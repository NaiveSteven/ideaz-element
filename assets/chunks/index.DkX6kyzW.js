import{b as Ee,u as Se,i as q,c as H,L as we,w as Re,_ as Oe,E as Pe,o as Ve,T as ue,a as Ne,M as De,r as ce}from"./typescript.CKOxkeGF.js";import{d as ne,l as y,a8 as Fe,r as ae,j as k,z as Ue,an as N,al as W,ak as X,J as b,b as Y,U as V,aa as Ke,af as _,y as de,m as He,ay as je,ai as x,az as Ge,G as R,o as p,e as E,w as S,Y as Z,a as w,n as f,Q as fe,$ as j,c as J,L as O,f as A,t as P,a4 as G,Z as Q,T as qe,am as Be,as as me,ao as Te}from"./framework.MLJTzN0E.js";import{P as B,i as pe,a as Ye,o as ve,E as We,b as Xe,c as Ze,u as Je,d as Qe,e as _e}from"./constants.yTaz_81t.js";import{E as xe,u as ge}from"./index.ZUMoh7gN.js";import{l as ye}from"./theme.CXtIRA2y.js";import{a as en,u as nn}from"./index.DtPyY5qJ.js";const an=Ee({prefixCls:{type:String}}),he=ne({name:"ElSpaceItem",props:an,setup(e,{slots:a}){const r=Se("space"),t=y(()=>`${e.prefixCls||r.b()}__item`);return()=>Fe("div",{class:t.value},ae(a,"default"))}}),be={small:8,default:12,large:16};function sn(e){const a=Se("space"),r=y(()=>[a.b(),a.m(e.direction),e.class]),t=k(0),o=k(0),s=y(()=>{const l=e.wrap||e.fill?{flexWrap:"wrap"}:{},c={alignItems:e.alignment},n={rowGap:`${o.value}px`,columnGap:`${t.value}px`};return[l,c,n,e.style]}),d=y(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return Ue(()=>{const{size:l="small",wrap:c,direction:n,fill:m}=e;if(N(l)){const[u=0,h=0]=l;t.value=u,o.value=h}else{let u;q(l)?u=l:u=be[l||"small"]||be.small,(c||m)&&n==="horizontal"?t.value=o.value=u:n==="horizontal"?(t.value=u,o.value=0):(o.value=u,t.value=0)}}),{classes:r,containerStyle:s,itemStyle:d}}const on=Ee({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:H([String,Object,Array]),default:""},style:{type:H([String,Array,Object]),default:""},alignment:{type:H(String),default:"center"},prefixCls:{type:String},spacer:{type:H([Object,String,Number,Array]),default:null,validator:e=>W(e)||q(e)||X(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:we,validator:e=>q(e)||N(e)&&e.length===2&&e.every(q)}}),tn=ne({name:"ElSpace",props:on,setup(e,{slots:a}){const{classes:r,containerStyle:t,itemStyle:o}=sn(e);function s(d,l="",c=[]){const{prefixCls:n}=e;return d.forEach((m,u)=>{pe(m)?N(m.children)&&m.children.forEach((h,M)=>{pe(h)&&N(h.children)?s(h.children,`${l+M}-`,c):c.push(b(he,{style:o.value,prefixCls:n,key:`nested-${l+M}`},{default:()=>[h]},B.PROPS|B.STYLE,["style","prefixCls"]))}):Ye(m)&&c.push(b(he,{style:o.value,prefixCls:n,key:`LoopKey${l+u}`},{default:()=>[m]},B.PROPS|B.STYLE,["style","prefixCls"]))}),c}return()=>{var d;const{spacer:l,direction:c}=e,n=ae(a,"default",{key:0},()=>[]);if(((d=n.children)!=null?d:[]).length===0)return null;if(N(n.children)){let m=s(n.children);if(l){const u=m.length-1;m=m.reduce((h,M,F)=>{const C=[...h,M];return F!==u&&C.push(b("span",{style:[o.value,c==="vertical"?"width: 100%":null],key:F},[W(l)?l:Y(l,B.TEXT)],B.STYLE)),C},[])}return b("div",{class:r.value,style:t.value},m,B.STYLE|B.CLASS)}return n.children}}}),Tn=Re(tn),ln=e=>["",...we].includes(e),ee="_trap-focus-children",I=[],Ce=e=>{if(I.length===0)return;const a=I[I.length-1][ee];if(a.length>0&&e.code===en.tab){if(a.length===1){e.preventDefault(),document.activeElement!==a[0]&&a[0].focus();return}const r=e.shiftKey,t=e.target===a[0],o=e.target===a[a.length-1];t&&r&&(e.preventDefault(),a[a.length-1].focus()),o&&!r&&(e.preventDefault(),a[0].focus())}},rn={beforeMount(e){e[ee]=ve(e),I.push(e),I.length<=1&&document.addEventListener("keydown",Ce)},updated(e){V(()=>{e[ee]=ve(e)})},unmounted(){I.shift(),I.length===0&&document.removeEventListener("keydown",Ce)}},un=ne({name:"ElMessageBox",directives:{TrapFocus:rn},components:{ElButton:We,ElFocusTrap:Xe,ElInput:xe,ElOverlay:Ze,ElIcon:Pe,...Ve},inheritAttrs:!1,props:{buttonSize:{type:String,validator:ln},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:a}){const{locale:r,zIndex:t,ns:o,size:s}=nn("message-box",y(()=>e.buttonSize)),{t:d}=r,{nextZIndex:l}=t,c=k(!1),n=Ke({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:_(ye),cancelButtonLoadingIcon:_(ye),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),m=y(()=>{const i=n.type;return{[o.bm("icon",i)]:i&&ue[i]}}),u=ge(),h=ge(),M=y(()=>{const i=n.type;return n.icon||i&&ue[i]||""}),F=y(()=>!!n.message),C=k(),se=k(),z=k(),U=k(),oe=k(),ke=y(()=>n.confirmButtonClass);de(()=>n.inputValue,async i=>{await V(),e.boxType==="prompt"&&i&&le()},{immediate:!0}),de(()=>c.value,i=>{var v,g;i&&(e.boxType!=="prompt"&&(n.autofocus?z.value=(g=(v=oe.value)==null?void 0:v.$el)!=null?g:C.value:z.value=C.value),n.zIndex=l()),e.boxType==="prompt"&&(i?V().then(()=>{var ie;U.value&&U.value.$el&&(n.autofocus?z.value=(ie=ze())!=null?ie:C.value:z.value=C.value)}):(n.editorErrorMessage="",n.validateError=!1))});const Ie=y(()=>e.draggable),Me=y(()=>e.overflow);Je(C,se,Ie,Me),He(async()=>{await V(),e.closeOnHashChange&&window.addEventListener("hashchange",$)}),je(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",$)});function $(){c.value&&(c.value=!1,V(()=>{n.action&&a("action",n.action)}))}const te=()=>{e.closeOnClickModal&&K(n.distinguishCancelAndClose?"close":"cancel")},Ae=_e(te),Le=i=>{if(n.inputType!=="textarea")return i.preventDefault(),K("confirm")},K=i=>{var v;e.boxType==="prompt"&&i==="confirm"&&!le()||(n.action=i,n.beforeClose?(v=n.beforeClose)==null||v.call(n,i,n,$):$())},le=()=>{if(e.boxType==="prompt"){const i=n.inputPattern;if(i&&!i.test(n.inputValue||""))return n.editorErrorMessage=n.inputErrorMessage||d("el.messagebox.error"),n.validateError=!0,!1;const v=n.inputValidator;if(x(v)){const g=v(n.inputValue);if(g===!1)return n.editorErrorMessage=n.inputErrorMessage||d("el.messagebox.error"),n.validateError=!0,!1;if(X(g))return n.editorErrorMessage=g,n.validateError=!0,!1}}return n.editorErrorMessage="",n.validateError=!1,!0},ze=()=>{var i,v;const g=(i=U.value)==null?void 0:i.$refs;return(v=g==null?void 0:g.input)!=null?v:g==null?void 0:g.textarea},re=()=>{K("close")},$e=()=>{e.closeOnPressEscape&&re()};return e.lockScroll&&Qe(c),{...Ge(n),ns:o,overlayEvent:Ae,visible:c,hasMessage:F,typeClass:m,contentId:u,inputId:h,btnSize:s,iconComponent:M,confirmButtonClasses:ke,rootRef:C,focusStartRef:z,headerRef:se,inputRef:U,confirmRef:oe,doClose:$,handleClose:re,onCloseRequested:$e,handleWrapperClick:te,handleInputEnter:Le,handleAction:K,t:d}}});function cn(e,a,r,t,o,s){const d=R("el-icon"),l=R("el-input"),c=R("el-button"),n=R("el-focus-trap"),m=R("el-overlay");return p(),E(qe,{name:"fade-in-linear",onAfterLeave:u=>e.$emit("vanish"),persisted:""},{default:S(()=>[Z(b(m,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:S(()=>[w("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:f(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[b(n,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:S(()=>[w("div",{ref:"rootRef",class:f([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:fe(e.customStyle),tabindex:"-1",onClick:j(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(p(),J("div",{key:0,ref:"headerRef",class:f([e.ns.e("header"),{"show-close":e.showClose}])},[w("div",{class:f(e.ns.e("title"))},[e.iconComponent&&e.center?(p(),E(d,{key:0,class:f([e.ns.e("status"),e.typeClass])},{default:S(()=>[(p(),E(O(e.iconComponent)))]),_:1},8,["class"])):A("v-if",!0),w("span",null,P(e.title),1)],2),e.showClose?(p(),J("button",{key:0,type:"button",class:f(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:G(j(u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[b(d,{class:f(e.ns.e("close"))},{default:S(()=>[(p(),E(O(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):A("v-if",!0)],2)):A("v-if",!0),w("div",{id:e.contentId,class:f(e.ns.e("content"))},[w("div",{class:f(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(p(),E(d,{key:0,class:f([e.ns.e("status"),e.typeClass])},{default:S(()=>[(p(),E(O(e.iconComponent)))]),_:1},8,["class"])):A("v-if",!0),e.hasMessage?(p(),J("div",{key:1,class:f(e.ns.e("message"))},[ae(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),E(O(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(p(),E(O(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:S(()=>[Y(P(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):A("v-if",!0)],2),Z(w("div",{class:f(e.ns.e("input"))},[b(l,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":u=>e.inputValue=u,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:f({invalid:e.validateError}),onKeydown:G(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),w("div",{class:f(e.ns.e("errormsg")),style:fe({visibility:e.editorErrorMessage?"visible":"hidden"})},P(e.editorErrorMessage),7)],2),[[Q,e.showInput]])],10,["id"]),w("div",{class:f(e.ns.e("btns"))},[e.showCancelButton?(p(),E(c,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:f([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:u=>e.handleAction("cancel"),onKeydown:G(j(u=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:S(()=>[Y(P(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):A("v-if",!0),Z(b(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:f([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:u=>e.handleAction("confirm"),onKeydown:G(j(u=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:S(()=>[Y(P(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Q,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Q,e.visible]])]),_:3},8,["onAfterLeave"])}var dn=Oe(un,[["render",cn],["__file","index.vue"]]);const D=new Map,fn=e=>{let a=document.body;return e.appendTo&&(X(e.appendTo)&&(a=document.querySelector(e.appendTo)),ce(e.appendTo)&&(a=e.appendTo),ce(a)||(a=document.body)),a},mn=(e,a,r=null)=>{const t=b(dn,e,x(e.message)||W(e.message)?{default:x(e.message)?e.message:()=>e.message}:null);return t.appContext=r,Be(t,a),fn(e).appendChild(a.firstElementChild),t.component},pn=()=>document.createElement("div"),vn=(e,a)=>{const r=pn();e.onVanish=()=>{Be(null,r),D.delete(o)},e.onAction=s=>{const d=D.get(o);let l;e.showInput?l={value:o.inputValue,action:s}:l=s,e.callback?e.callback(l,t.proxy):s==="cancel"||s==="close"?e.distinguishCancelAndClose&&s!=="cancel"?d.reject("close"):d.reject("cancel"):d.resolve(l)};const t=mn(e,r,a),o=t.proxy;for(const s in e)me(e,s)&&!me(o.$props,s)&&(s==="closeIcon"&&Te(e[s])?o[s]=_(e[s]):o[s]=e[s]);return o.visible=!0,o};function L(e,a=null){if(!Ne)return Promise.reject();let r;return X(e)||W(e)?e={message:e}:r=e.callback,new Promise((t,o)=>{const s=vn(e,a??L._context);D.set(s,{options:e,callback:r,resolve:t,reject:o})})}const gn=["alert","confirm","prompt"],yn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};gn.forEach(e=>{L[e]=hn(e)});function hn(e){return(a,r,t,o)=>{let s="";return Te(r)?(t=r,s=""):De(r)?s="":s=r,L(Object.assign({title:s,message:a,type:"",...yn[e]},t,{boxType:e}),o)}}L.close=()=>{D.forEach((e,a)=>{a.doClose()}),D.clear()};L._context=null;const T=L;T.install=e=>{T._context=e._context,e.config.globalProperties.$msgbox=T,e.config.globalProperties.$messageBox=T,e.config.globalProperties.$alert=T.alert,e.config.globalProperties.$confirm=T.confirm,e.config.globalProperties.$prompt=T.prompt};const kn=T;export{Tn as E,rn as T,kn as a,an as b,ln as i,on as s,sn as u};
